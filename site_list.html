<!DOCTYPE html>
<html>
<head>
  <title>KoFlux - Site List</title>
  
  <!-- Leaflet Map CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

  <style>
    /* CSS는 모든 페이지에 걸쳐 일관성을 유지합니다. */
    :root {
      --main-blue: rgba(51, 85, 127, 1);
      --light-blue: #5bc0de;
      --page-background: #f8f8f8;
      --link-color: #337ab7;
      --font-family: "Malgun Gothic", "맑은 고딕", sans-serif;
    }

    body {
      background-color: var(--page-background); 
      color: #333333;
      font-family: var(--font-family);
      margin: 0;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background-color: white; 
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); 
      padding-top: 1px;
      min-height: 100vh;
    }

    /* Logo and Top Header Area */
    .header-top {
      background-color: var(--main-blue); 
      color: white; 
      padding: 10px 20px;
    }
    .header-top h2 { 
        margin: 0; 
        font-size: 28px; /* 28px 유지 */
        display: inline-block; 
    }
    .header-top span { 
        font-size: 14px; 
        margin-left: 10px; 
    }


    /* Navigation Bar (Menu) Styles */
    .navbar {
      background-color: var(--main-blue); 
      overflow: visible; 
      min-height: 50px;
      padding: 0 20px;
      margin-bottom: 20px;
    }
    .navbar-item {
      float: left;
      position: relative;
    }
    .navbar-item a {
      display: block;
      color: white;
      text-align: center;
      padding: 15px 18px;
      text-decoration: none;
      font-weight: bold;
      font-size: 14px;
    }
    
    .navbar-item.active > a {
        background-color: var(--light-blue);
        color: black;
    }
    .navbar-item:hover > a { 
        background-color: var(--light-blue);
        color: black;
    }
    
    .dropdown-content { display: none; position: absolute; background-color: white; min-width: 200px; box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); z-index: 1000; left: 0; top: 100%; }
    .dropdown-content a { color: #333; padding: 12px 16px; text-decoration: none; display: block; text-align: left; float: none; font-weight: normal; }
    
    .navbar-item:hover .dropdown-content { display: block; } 
    .navbar-item:hover .dropdown-content a:hover {
        background-color: #f1f1f1;
        color: var(--main-blue);
    }
    .navbar-item.active:hover > a {
        background-color: var(--light-blue);
        color: black;
    }

    /* Body Content Styles */
    .content-area {
        padding: 0 20px 20px 20px;
    }
    
    .main-content h1 {
        color: #333;
        font-size: 28px;
        padding: 0;
        border: none;
        margin-top: 0;
    }
    .main-content p {
        padding: 0;
        margin-bottom: 15px;
        line-height: 1.6;
    }
    
    /* Map Container */
    #map {
        width: 100%;
        height: 500px; 
        margin: 20px 0;
        z-index: 1;
    }

    /* Site Table Style */
    .site-table-container {
        margin-top: 30px;
        font-family: Arial, sans-serif;
    }
    .site-entry {
        border: 1px solid #e0e0e0;
        margin-bottom: 15px;
        background: #f9f9f9;
        border-radius: 4px;
        overflow: hidden;
    }
    .site-entry-row {
        padding: 10px 15px;
        display: flex;
        border-bottom: 1px solid #e0e0e0;
    }
    .site-entry-row:last-child {
        border-bottom: none;
    }
    .site-label {
        font-weight: bold;
        color: #555;
        flex: 0 0 150px; 
    }
    .site-value {
        flex: 1;
        color: #333;
    }
    
    .breadcrumb {
        font-size: 13px; color: #666; padding-left: 0;
    }

  </style>
  
  <!-- Leaflet Map JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

</head>
<body>
  
  <div class="container">
      
      <div class="header-top">
          <h2>KoFlux</h2>
          <span>The Data Portal serving the KoFlux Community</span>
      </div>
      
      <div class="navbar">
          <div class="navbar-item">
              <a href="index.html">Home</a>
          </div>
          
          <div class="navbar-item">
              <a href="about_koflux.html">About</a>
              <div class="dropdown-content">
                  <a href="about_koflux.html">About KoFlux</a>
                  <a href="regional_networks.html">Regional Networks</a>
              </div>
          </div>
          
          <div class="navbar-item">
              <a href="community.html">Community</a>
          </div>
          
          <div class="navbar-item active">
              <a href="#">Sites</a>
              <div class="dropdown-content">
                  <a href="sites_info.html">Site Summary</a>
                  <a href="site_list.html">Site List</a>
              </div>
          </div>
          
          <div class="navbar-item">
              <a href="#">Education</a>
          </div>
          
          <div class="navbar-item">
              <a href="#">Data</a>
              <div class="dropdown-content">
                  <a href="about_data.html">About Data</a>
                  <a href="download_data.html">Download Data</a>
              </div>
          </div>
          
          <div class="navbar-item" style="float: right;">
              <!-- Sign In 링크를 signin.html로 연결 -->
              <a href="signin.html" id="nav-auth-text">Sign In</a>
          </div>
      </div>
      
      <div class="content-area">
          <div class="main-content">
              <p class="breadcrumb">Home / Sites / Site List</p>
              <h1>Site List</h1>
              <p>As of 2025, numerous sites are registered in the KoFlux network. The map below shows the locations of registered observation sites across South Korea.</p>
              
              <div id="map"></div>

              <div class="site-table-container" id="site-table-area">
                  <h2>Site Details</h2>
              </div>
          </div>
      </div>
  </div>

  <script type="module">
    // Firebase 인증 연동
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    
    // Firebase 구성에 유효한 apiKey를 추가했습니다.
    const firebaseConfig = { 
        apiKey: "AIzaSyDmsWgnQqeojm3cNobdTUQSt0m3IE3lKJU", 
        authDomain: "project0-a0afb.firebaseapp.com", 
        projectId: "project0-a0afb",
        storageBucket: "project0-a0afb.firebasestorage.app",
        messagingSenderId: "498452008968",
        appId: "1:498452008968:web:c7c162b4e8354cd37441bd",
        measurementId: "G-M542BRK99Z"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    onAuthStateChanged(auth, (user) => {
      document.getElementById('nav-auth-text').textContent = user ? "Profile" : "Sign In";
    });

    // 1. Define Site Data
    const sites = [
        { code: "AMD", name: "Anmyeondo Coniferous forest", type: "Coniferous forest", lat: 36.53, lng: 126.32 },
        { code: "CFK", name: "Cheongmicheon Farmland", type: "Rice Paddy", lat: 37.16, lng: 127.65 },
        { code: "CRK", name: "Cheorwon Rice paddy", type: "Rice Paddy", lat: 38.20, lng: 127.25 },
        { code: "GBK", name: "Gimje Soybean Field", type: "Soybean Field", lat: 35.80, lng: 126.88 },
        { code: "GCK", name: "Gwangreung Coniferous forest", type: "Coniferous forest", lat: 37.75, lng: 127.17 },
        { code: "GDK", name: "Gwangreung Deciduous forest", type: "Deciduous forest", lat: 37.76, lng: 127.18 },
        { code: "GRK", name: "Gimje Rice Paddy", type: "Rice Paddy", lat: 35.81, lng: 126.89 },
        { code: "GRK", name: "Gimje Rice-barley double cropping Paddy Field", type: "Rice Paddy", lat: 35.82, lng: 126.90 },
        { code: "HC", name: "Hongcheon Mixed forest", type: "Mixed forest", lat: 37.69, lng: 127.88 },
        { code: "HFK", name: "Haenam Farmland", type: "Farmland", lat: 34.55, lng: 126.58 },
        { code: "HPK", name: "Haenam Paddy-field", type: "Rice Paddy", lat: 34.57, lng: 126.60 },
        { code: "JJ", name: "Jeju Mixed forest", type: "Mixed forest", lat: 33.36, lng: 126.53 },
        { code: "NRK1, 2", name: "Naju Rice Paddy", type: "Rice Paddy", lat: 35.01, lng: 126.71 },
        { code: "PYC", name: "Pyeongchang Deciduous forest", type: "Deciduous forest", lat: 37.37, lng: 128.39 },
        { code: "SC", name: "Samcheok Coniferous forest", type: "Coniferous forest", lat: 37.44, lng: 129.16 },
        { code: "SMK", name: "Seolmacheon Mixed forest", type: "Mixed forest", lat: 37.93, lng: 126.95 },
        { code: "SRK", name: "Seocheon Reservoir", type: "Reservoir", lat: 36.08, lng: 126.69 },
        { code: "TBK", name: "Taehwa Broadleaf forest", type: "Broadleaf forest", lat: 37.31, lng: 127.31 },
        { code: "TCK", name: "Taehwa Coniferous forest", type: "Coniferous forest", lat: 37.32, lng: 127.32 },
        { code: "UOK", name: "Uiseong Apple Orchard", type: "Apple Orchard", lat: 36.35, lng: 128.69 },
        { code: "WD", name: "Wando Evergreen broadleaf forest", type: "broadleaf forest", lat: 34.31, lng: 126.71 }
    ];

    // 2. Initialize Leaflet Map
    const map = L.map('map').setView([36.5, 127.8], 7); 

    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    }).addTo(map);

    // 3. Add Markers and Build Table
    const tableContainer = document.getElementById('site-table-area');

    sites.forEach(site => {
        L.marker([site.lat, site.lng])
         .addTo(map)
         .bindPopup(`<b>${site.code}</b><br>${site.name}`);

        const entryDiv = document.createElement('div');
        entryDiv.className = 'site-entry';
        entryDiv.innerHTML = `
            <div class="site-entry-row">
                <span class="site-label">Site Code:</span>
                <span class="site-value">${site.code}</span>
            </div>
            <div class="site-entry-row">
                <span class="site-label">Site Name:</span>
                <span class="site-value">${site.name}</span>
            </div>
            <div class="site-entry-row">
                <span class="site-label">Type:</span>
                <span class="site-value">${site.type}</span>
            </div>
            <div class="site-entry-row">
                <span class="site-label">Status:</span>
                <span class="site-value">Continuous</span>
            </div>
            <div class="site-entry-row">
                <span class="site-label">Details:</span>
                <span class="site-value"></span>
            </div>
        `;
        tableContainer.appendChild(entryDiv);
    });
  </script>
</body>
</html>
